"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createCertificate = void 0;
const mkcert_js_1 = require("./mkcert.js");
const utils_js_1 = require("./utils.js");
/**
 * @param {string[]=} hosts
 * @param {{force?: boolean, autoUpgrade?: boolean, keyFilePath: string, certFilePath: string }} mkcertOptions
 * @returns
 */
const createCertificate = async (mkcertOptions, hosts = []) => {
    const mkcert = new mkcert_js_1.Mkcert({
        ...mkcertOptions,
    });
    await mkcert.init();
    const uniqueHosts = Array.from(new Set([...(0, utils_js_1.getDefaultHosts)(), ...hosts])).filter((item) => !!item);
    const { key, cert } = await mkcert.install(uniqueHosts);
    return { key, cert };
};
exports.createCertificate = createCertificate;
